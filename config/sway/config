#                                            .___                    .__     
#  ________  _  _______  ___.__.           __| _/____ _______   ____ |  |__  
# /  ___/\ \/ \/ /\__  \<   |  |  ______  / __ |\__  \\_  __ \_/ ___\|  |  \ 
# \___ \  \     /  / __ \\___  | /_____/ / /_/ | / __ \|  | \/\  \___|   Y  \
#/____  >  \/\_/  (____  / ____|         \____ |(____  /__|    \___  >___|  /
#     \/               \/\/                   \/     \/            \/     \/ 

# //computingforgeeks.com/
# Please see https://github.com/swaywm/sway/wiki for a complete reference!
#
###------------------> MODS DE SETEO
set $mod Mod4
set $mod1 Mod1
floating_modifier $mod

# Ocultar el mouse
seat * hide_cursor 3000

# Run pure wayland
#xwayland disable
# no DISPLAY environment variable specified

###---------------------------> SETEO DE APPS FAVORITOS

# Set your terminal
set $terminal gnome-terminal
set $lanzador rofi -modi drun -show drun -width 22
set $editor nvim

###--------------------------------------> AUTOARRANQUES

exec export EDITOR='nvim'
exec export `gnome-keyring-daemon --start --components=ssh`
exec export SUDO_ASKPASS="$HOME/.config/sway/scripts/bin/pass"
exec export PATH="${PATH}:$HOME/.config/sway/scripts/bin"
exec export _JAVA_AWT_WM_NONREPARENTING=1
exec export QT_AUTO_SCREEN_SCALE_FACTOR=0
exec export TDESKTOP_DISABLE_GTK_INTEGRATION=1
exec export SWAYSOCK=/run/user/$(id -u)/sway-ipc.$(id -u).$(pgrep -x sway).sock
exec dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP=sway
exec export DISPLAY=:0
exec lxpolkit
exec pipewire
exec mako
 
####-----------------------------------------------> APPS ATAJOS

# Mako
bindsym $mod+y exec makoctl dismiss
bindsym $mod+Shift+y exec makoctl dismiss -a

# start a terminal
bindsym $mod+Return exec $terminal

# start rofi (a program launcher)
bindsym $mod+d exec $lanzador 

# Ranger
bindsym $mod+e exec gnome-terminal -x ranger

# Nautilus
bindsym $mod+r exec nautilus

# Neovim
bindsym $mod+shift+n exec gnome-terminal -x $editor

# Browser
bindsym $mod+w exec flatpak run org.mozilla.firefox

# Alsamixer
bindsym $mod+c exec gnome-terminal -x alsamixer

# Spotify
bindsym $mod+m exec flatpak run --file-forwarding --command=sh com.spotify.Client -c 'eval "$(sed s#LD_PRELOAD=#LD_PRELOAD=$HOME/.spotify-adblock/spotify-adblock.so:#g /app/bin/spotify)"' @@u %U @@

###------------------------------------------------------------> Sway-System

# sway conf gaps
# for_window [class="^.*"] border pixel 0
gaps inner 4
gaps outer 4
smart_gaps on
default_border pixel 3
#smart_borders on
#set $borderwidth 1
hide_edge_borders both

# reload the configuration file
bindsym $mod+Alt+r reload

# set-Tema
exec_always {
    #gsettings set $gnome-schema gtk-theme 'Windows-10'
    #gsettings set $gnome-schema icon-theme 'Windows-10'
    gsettings set $gnome-schema monospace-font-name 'Roboto Mono 11'
    gsettings set $gnome-schema document-font-name 'Roboto 11'
    gsettings set $gnome-schema font-name 'Roboto 11'
    gsettings set org.gnome.desktop.wm.preferences titlebar-font 'Roboto Bold 10'
    gsettings set org.gtk.Settings.FileChooser window-size '(1100,700)'
    gsettings set org.gnome.desktop.default-applications.terminal exec gnome-terminal
    gsettings set org.gnome.desktop.default-applications.terminal exec-arg -e
    gsettings set org.gnome.desktop.wm.preferences button-layout ''
	set $gnome-schema org.gnome.desktop.interface
}

exec "hash dbus-update-activation-environment 2>/dev/null; \
     dbus-update-activation-environment --all; \
     dbus-update-activation-environment --systemd; \
     systemctl --user start sway-session.target"
     
#exec_always gsettings set $gnome-schema gtk-theme 'Arc-Dark'

# Defining colors
set {
	$white		#ffffff
	$cyan		#00afd7
	$acqua		#00d787 
	$wine		#72003e
	$magenta	#af005f
	$orange		#ff8700
	$silver		#e4e4e4
	$elegant	#1b1d1e
	$transparent	#000000
	#$transparent	#0000007f
}

# Set some nice 	colors		border		background	text		indicator	child_border
client.focused		$elegant	$cyan		$elegant	$white		$cyan
client.unfocused	$elegant	$elegant	$orange		$white		$elegant
client.focused_inactive	$elegant	$elegant	$acqua		$magenta	$acqua
client.urgent		$elegant	$magenta	$silver		$magenta	$magenta
client.placeholder	$elegant	$magenta	$silver		$white		$magenta


# Font for window titles. Will also be used by the bar unless a different font
# is used in the bar {} block below.

# This font is widely installed, provides lots of unicode glyphs, right-to-left
# text rendering and scalability on retina/hidpi displays (thanks to pango).

font pango: Inconsolata 12

# Workspace Variables

set $ws1 "1:一"
set $ws2 "2:二"
set $ws3 "3:三"
set $ws4 "4:四"
set $ws5 "5:五"
set $ws6 "6:六"
set $ws7 "7:七"
set $ws8 "8:八"
set $ws9 "9:九"
set $ws0 "0:零"


# switch to workspace
bindsym $mod+1 workspace $ws1
bindsym $mod+2 workspace $ws2
bindsym $mod+3 workspace $ws3
bindsym $mod+4 workspace $ws4
bindsym $mod+5 workspace $ws5
bindsym $mod+6 workspace $ws6
bindsym $mod+7 workspace $ws7
bindsym $mod+8 workspace $ws8
bindsym $mod+9 workspace $ws9
bindsym $mod+0 workspace $ws0

# move focused container to workspace
bindsym $mod+Shift+1 move container to workspace $ws1
bindsym $mod+Shift+2 move container to workspace $ws2
bindsym $mod+Shift+3 move container to workspace $ws3
bindsym $mod+Shift+4 move container to workspace $ws4
bindsym $mod+Shift+5 move container to workspace $ws5
bindsym $mod+Shift+6 move container to workspace $ws6
bindsym $mod+Shift+7 move container to workspace $ws7
bindsym $mod+Shift+8 move container to workspace $ws8
bindsym $mod+Shift+9 move container to workspace $ws9
bindsym $mod+Shift+0 move container to workspace $ws0


##bar

bar {
  swaybar_command waybar
  workspace_buttons yes
}

output * bg /var/home/darch/Pictures/24.jpg fill
exec --no-startup-id /usr/lib/gsd-xsettings

###-----------------------------------------------------------------------> MENU APAGADO

# Shutdown, Reboot, Lock Screen, and Logout 

set $power_mode "power"
bindsym $mod+Shift+q      mode $power_mode
mode $power_mode {
    bindsym p         exec systemctl poweroff
    bindsym r         exec systemctl reboot 
    bindsym l         exec swaylock -i ~/Pictures/22.jpg , mode "default"
    bindsym q         exec swaynag -t warning -m 'Do you really want to exit sway' -b 'Yes, exit sway' 'swaymsg exit'
    bindsym h         exec systemctl hibernate 
    #bindsym s        exec sudo  /lib/systemd/systemd-sleep hybrid-sleep 
    bindsym s         exec pm-suspend
	
	
# Hibernate
bindsym $mod+Shift+z exec swaynag -t warning -m 'Sleepy time?!?!' -b 'ZzZz...' 'systemctl hibernate'
    bindsym Return    mode "default"
    bindsym Escape    mode "default"
}

###---------------------------------------------------------------------------------> MULTIMEDIA

# Pipewire Audio controls

bindsym XF86AudioRaiseVolume exec "amixer set Master 1%+ unmute"
bindsym XF86AudioLowerVolume exec "amixer set Master 1%- unmute"
bindsym XF86AudioMute exec "amixer set Master toggle"
bindsym XF86AudioMicMute exec "amixer set Capture toggle"

# Sreen brightness controls -- # https://github.com/haikarainen/light
bindsym XF86MonBrightnessUp exec "light -A 5"  # increase screen brightness
bindsym XF86MonBrightnessDown exec "light -U 5"	# decrease screen brightness
bindsym shift+up exec light -A 5    # increase screen brightness
bindsym shift+down exec light -U 5  # decrease screen brightness

# multimedia keys/spotify conf
bindsym XF86AudioPlay  exec "dbus-send --print-reply --dest=org.mpris.MediaPlayer2.spotify /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.PlayPause"
bindsym XF86AudioNext  exec "dbus-send --print-reply --dest=org.mpris.MediaPlayer2.spotify /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.Next"
bindsym XF86AudioPrev  exec "dbus-send --print-reply --dest=org.mpris.MediaPlayer2.spotify /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.Previous"

# screenshot
bindsym Print exec grim -t jpeg -q 100 $(date +'D-shot_%Y-%m-%d-%H%M%S.jpeg')
bindsym Shift+Print exec --no-startup-id slurp | grim -t jpeg -q 100 -g - $HOME/$(date +'Area-D-shot_%Y-%m-%d-%H%M%S.jpeg')
bindsym Alt+Shift+Print exec maim -m 1 -i D-shot-ventana-activa-"$(date '+%y%m%d-%H%M-%S').png"


###-----------------------------------------------------------------------------------------------> MANEJO DE VENTANAS

# Preseleccionar forma de ventana Horizontal
bindsym $mod+k split h 
# Preseleccionar forma de ventana Vertical
bindsym $mod+l split v

# Cerrar Ventana
bindsym $mod+q kill

# change focus
bindsym $mod+j focus left
bindsym $mod+h focus down

# bindsym $mod+l focus up
bindsym $mod+semicolon focus right

# alternatively, you can use the cursor keys:
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# move focused window
bindsym $mod+Shift+j move left
bindsym $mod+Shift+k move down
bindsym $mod+Shift+l move up
bindsym $mod+Shift+semicolon move right

# alternatively, you can use the cursor keys:
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right


# enter fullscreen mode for the focused container
bindsym $mod+f fullscreen toggle

# Switch the current container between different layout styles
bindsym	$mod+i	layout stacking
bindsym	$mod+o	layout tabbed
bindsym	$mod+p	layout toggle split

# toggle tiling / floating
bindsym $mod+s floating toggle

# change focus between tiling / floating windows
bindsym $mod+space focus mode_toggle

# focus the parent container
bindsym $mod+a focus parent

# focus the child container
#bindsym $mod+d focus child

# Resize
bindsym Ctrl+shift+Left resize shrink width 5 px or 5 ppt
bindsym Ctrl+shift+Down resize grow height 5 px or 5 ppt
bindsym Ctrl+shift+Up resize shrink height 5 px or 5 ppt
bindsym Ctrl+shift+Right resize grow width 5 px or 5 ppt

# Start i3bar to display a workspace bar (plus the system information i3status
# finds out, if available)

# Floating windows

for_window [window_role="pop-up"] floating enable
for_window [window_role="bubble"] floating enable
for_window [window_role="task_dialog"] floating enable
for_window [window_role="Preferences"] floating enable

for_window [window_role="task_dialog|bubble|page-info|Preferences|pop-up"] floating enable
for_window [window_role="Open Files"] floating enable sticky
for_window [window_role="File Operation Progress"] floating enable sticky
for_window [window_role="Save As"] floating enable

for_window [class="qBittorrent" window_role="pop-up"] floating enable
for_window [class="gnome-terminal -x alsamixer" window_role="Open"] floating enable
for_window [class="steam_app.*"] fullscreen enable
for_window [class="steam_app*"] inhibit_idle focus
for_window [window_type="dialog"] floating enable
for_window [window_type="menu"] floating enable
#for_window [class="VirtualBox"] floating enable

# Sticky window
for_window [instance="file_progress"]  sticky enable
for_window [class="info|Mate-color-select|gcolor2|timesup|QtPass|GtkFileChooserDialog"] sticky enable
 
# Focus window settings
no_focus [window_role="pop-up"]
focus_on_window_activation focus 
#for_window [class="(?i)"] focus 


###-------------------------------------------------------------------------------------------------------------->_MONITORES
# Configure outputs here
# How to get outputs configurable - $ swaymsg -t get_outputs
output eDP-1 {
                background ~/Pictures/24.jpg fill
                resolution 1920x1080
		scale 1.4
           }

# Inputs - Get your inputs with the command:
# swaymsg -t get_inputs
input 1267:35:Elan_Touchpad {
    tap enabled
    natural_scroll enabled
}

###--------------------------------------------------------------------------------------------------------------------------------------------> KEYBOARD LAYOUT
input * {
	xkb_layout "latam"
	xkb_options "grp:win_space_toggle"
}


